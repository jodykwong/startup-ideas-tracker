# 🚀 一键部署指南

## 📋 部署前准备

### 1. 删除现有仓库（如果存在）
如果您之前创建过 `startup-ideas-tracker` 仓库，请先删除：
1. 访问 https://github.com/jodykwong/startup-ideas-tracker
2. 点击 Settings → 滚动到底部 → Delete this repository
3. 输入仓库名确认删除

### 2. 创建新的 GitHub 仓库
1. 访问 https://github.com/new
2. 仓库名：`startup-ideas-tracker`
3. 设置为 Public（推荐）或 Private
4. **不要**勾选 "Add a README file"
5. **不要**勾选 "Add .gitignore"
6. **不要**勾选 "Choose a license"
7. 点击 "Create repository"

## 🎯 一键自动化部署

### 步骤 1：运行自动化脚本

在项目目录中运行：

```bash
./auto-deploy-setup.sh
```

脚本将自动完成：
- ✅ 检查系统要求
- ✅ 初始化 Git 仓库
- ✅ 安装项目依赖
- ✅ 创建环境变量模板
- ✅ 提交并推送代码到 GitHub

### 步骤 2：连接 Vercel（2分钟）

1. **访问 Vercel Dashboard**
   - 打开 https://vercel.com/dashboard
   - 使用 GitHub 账号登录

2. **导入项目**
   - 点击 "New Project"
   - 选择 "Import Git Repository"
   - 找到并选择 `startup-ideas-tracker` 仓库
   - 点击 "Import"

3. **配置项目设置**
   - Framework Preset: **Astro** （自动检测）
   - Root Directory: `./` （默认）
   - Build Command: `npm run build` （自动填充）
   - Output Directory: `dist` （自动填充）
   - Install Command: `npm install` （自动填充）

4. **添加环境变量**
   在 "Environment Variables" 部分添加：
   ```
   PUBLIC_SUPABASE_URL = https://your-project.supabase.co
   PUBLIC_SUPABASE_ANON_KEY = your_supabase_anon_key
   GEMINI_API_KEY = your_gemini_api_key
   NODE_ENV = production
   ```

5. **部署**
   - 点击 "Deploy"
   - 等待部署完成（约1-2分钟）

### 步骤 3：配置自动部署（3分钟）

1. **获取 Vercel 信息**
   - 在 Vercel 项目页面，点击 "Settings"
   - 记录以下信息：
     - Project ID（在 General 标签页）
     - Team ID（在 General 标签页，如果是个人账户则为 User ID）

2. **创建 Vercel Token**
   - 访问 https://vercel.com/account/tokens
   - 点击 "Create Token"
   - 输入名称：`GitHub Actions`
   - 选择 Scope：`Full Account`
   - 点击 "Create"
   - **复制并保存 Token**

3. **配置 GitHub Secrets**
   - 访问 https://github.com/jodykwong/startup-ideas-tracker/settings/secrets/actions
   - 点击 "New repository secret"
   - 添加以下 Secrets：

   ```
   VERCEL_TOKEN = your_vercel_token
   VERCEL_ORG_ID = your_team_or_user_id
   VERCEL_PROJECT_ID = your_project_id
   PUBLIC_SUPABASE_URL = https://your-project.supabase.co
   PUBLIC_SUPABASE_ANON_KEY = your_supabase_anon_key
   GEMINI_API_KEY = your_gemini_api_key
   ```

## ✅ 验证部署

### 测试自动部署
1. 对项目进行任何小修改
2. 提交并推送到 GitHub：
   ```bash
   git add .
   git commit -m "测试自动部署"
   git push origin main
   ```
3. 查看 GitHub Actions：
   - 访问 https://github.com/jodykwong/startup-ideas-tracker/actions
   - 确认工作流正在运行
4. 查看 Vercel 部署：
   - 在 Vercel Dashboard 中查看部署状态

### 访问应用
- **生产环境**: `https://your-project.vercel.app`
- **GitHub 仓库**: `https://github.com/jodykwong/startup-ideas-tracker`

## 🎉 完成！

现在您拥有：
- ✅ 自动化的 GitHub 仓库
- ✅ Vercel 生产环境部署
- ✅ GitHub Actions 自动部署流程
- ✅ 环境变量安全管理
- ✅ 预览部署（PR 时自动创建）

## 📞 故障排除

### 常见问题

**Q: GitHub Actions 失败**
- 检查 GitHub Secrets 是否正确设置
- 确认 VERCEL_TOKEN 有效
- 查看 Actions 日志获取详细错误信息

**Q: Vercel 构建失败**
- 检查环境变量是否正确设置
- 确认 Supabase 和 Gemini API 密钥有效
- 查看 Vercel 构建日志

**Q: API 端点不工作**
- 确认环境变量在 Vercel 中正确配置
- 检查 API 路由文件是否正确
- 查看 Vercel Functions 日志

### 获取帮助
- 查看项目中的 `DEPLOYMENT_GUIDE.md` 详细文档
- 检查 Vercel 和 GitHub Actions 的官方文档
- 查看项目的 GitHub Issues

---

**总部署时间**: 约 10-15 分钟
**维护工作量**: 几乎为零（全自动化）
